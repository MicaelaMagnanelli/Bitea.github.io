<head></head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bitea</title>
<link rel="icon" href="Imagenes/Logo.png" type="image/x-icon">
<link rel="stylesheet" href="Css/style-sabores.css">

<!-- TIPOGRAFÍA -->
<link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai+Looped:wght@100;200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
</head>


<body>

    <!-- Menú de navegación -->
    <header>
        <div class="logo">
            <a href="index.html">
                <img src="Imagenes/Logo de Bitea (Blanco).png" alt="Logo" class="logo-img">
            </a>
        </div>

        <!-- Ícono del menú hamburguesa (visible solo en móvil/tablet) -->
        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <!-- Menú principal -->
        <nav id="nav-menu">
            <ul class="menu">
                <li><a href="index.html" id="menu-link" data-i18n="menu-link">Menú</a></li>
                <li><a href="Comprar.html" id="comprar-link" data-i18n="comprar-link">Comprar</a></li>
                <li><a href="#" id="abrir-popup-personalizado" data-i18n="abrir-popup-personalizado">Personalizar</a>
                </li>
            </ul>
        </nav>

        <!-- Íconos de carrito -->
        <div class="icon-container">
            <!-- El enlace del carrito -->
            <a href="javascript:void(0)" onclick="mostrarCarrito()">
                <img src="Imagenes/Menu/Carrito.png" alt="Carrito" class="icon">
                <!-- El contador debe estar aquí, en el ícono del carrito -->
                <span id="contador-carrito" class="contador-carrito">0</span>
            </a>
        </div>

        <!-- Modal del carrito -->
        <div id="modal-carrito" class="modal" style="display: none;">
            <div class="modal-contenido">
                <!-- Botón para cerrar el modal -->
                <span class="cerrar" onclick="cerrarCarrito()">&times;</span>

                <!-- Contenido del carrito -->
                <div id="contenido-carrito"></div>

                <!-- Total del carrito -->
                <div id="total-carrito"></div>

                <!-- Botón de finalizar compra en el footer -->
                <div id="footer-carrito">
                    <button class="boton-finalizar" id="checkout-btn" onclick="irACaja()">Finalizar compra</button>
                </div>
            </div>
        </div>
    </header>

    <section class="sabores"
        style="background-image: url('Imagenes/Fondo/Fondo de Detalles Rosa.png'); background-size: cover; background-position: center -315px; padding: 130px; color: white;">
        <div id="details">
            <h1>Pistacho Lover</h1>
            <p id="pistachio-lover-desc">Cada bocado es una explosión de sabor que hará que tus sentidos se deleiten.
            </p>
            <img src="Imagenes/Sabores/8. C. Pistacho Lover (SIN FONDO).png" alt="pistacho-lover">
        </div>


        <div class="botones">
            <a href="Comprar.html" class="comprar" id="comprar-link">Comprar</a>
            <!-- Favorite Button -->
            <button id="favoriteButton">
                <img id="heartIcon" src="Imagenes/Sabores/Favorito/Ícono Favoritos.png" alt="Add to Favorites" />
                <span id="favorite-button">Agregar a favorito</span>
            </button>
        </div>

        <div class="estrellas">
            <img src="Imagenes/Sabores/Favorito/Estrella completa.png" alt="estrella uno">
            <img src="Imagenes/Sabores/Favorito/Estrella completa.png" alt="estrella dos">
            <img src="Imagenes/Sabores/Favorito/Estrella completa.png" alt="estrella tres">
            <img src="Imagenes/Sabores/Favorito/Estrella completa.png" alt="estrella cuatro">
            <img src="Imagenes/Sabores/Favorito/Estrella y media.png" alt="media estrella ">
            <p>4.5 / 1.532 Reviews</p>
        </div>
    </section>

    <!-- Sección de "Reviews" -->
    <section class="reviews">
        <h2>Reviews</h2>
        <div class="review-cards">
            <div class="card">
                <p id="review-34">“Ufff, este sabor me vuelve locoo”</p>
                <span>— Entique Cobacho</span>
            </div>
            <div class="card">
                <p id="review-35">“Es tannn sabroso, lo recomiendo!”</p>
                <span>— Ivana Gray</span>
            </div>
            <div class="card">
                <p id="review-36">“Son todos tan lindos, no sé cuál elegir”</p>
                <span>— Melanie Arrietas</span>
            </div>
        </div>
    </section>



    <!-- ETIQUETA NUTRICIONAL E INGREDIENTES-->
    <div class="accordion">
        <div class="accordion-item">
            <button class="accordion-header" onclick="toggleAccordion(this)">
                <strong id="accordion-ingredientes">Ingredientes</strong>
                <img class="arrow" src="Imagenes/Flechas/Flecha.png" alt="Arrow down">
            </button>
            <div class="accordion-content">
                <p id="ingredientes-text"><strong>Contiene: Azúcar, Leche, Trigo, Huevo.</strong></p>
                <p id="alergenos-text">
                    Nuestros cupcakes se preparan en el lugar y pueden entrar en contacto con diferentes alérgenos
                    durante su producción. Por favor, tenga en cuenta que cualquiera de nuestros productos puede
                    contener alérgenos como maní, frutos secos, leche, huevo, trigo, soya y sésamo.
                </p>
                <p id="calorias-text">
                    El consumo diario recomendado es de 2.000 calorías, pero las necesidades calóricas pueden variar.
                </p>
                <p id="calorias-nota-text">
                    *Las calorías se calculan por porción. El tamaño de la porción varía según el producto*
                </p>

            </div>

        </div>
        <div class="accordion-item">
            <button class="accordion-header" onclick="toggleAccordion(this)">
                <strong id="accordion-etiqueta-nutricional">Etiqueta Nutricional</strong>
                <img class="arrow" src="Imagenes/Flechas/Flecha.png" alt="Arrow down">
            </button>
            <div class="accordion-content">
                <img src="Imagenes/Sabores/Favorito/Etiqueta nutricional.png" alt="Nutritional Label"
                    class="nutritional-label" style="width: 50%; max-width: 300px; height: auto;">
            </div>
        </div>
    </div>

    <!-- Pop-up (popup-personalizado) -->
    <div class="popup" id="popup-personalizado">
        <span id="cerrar-popup-personalizado" class="cerrar-popup">&times;</span>
        <h3 id="titulo-popup-personalizado">Armá tu cupcake</h3>
        <p id="subtitulo-popup-personalizado">Elegí tu Frosting</p>
        <img id="imagen-cupcake-personalizado" class="imagen-cupcake"
            src="Imagenes/Personalizado/Frosting (CUPCAKE - PERSONALIZADO).png" alt="Cupcake con Frosting">
        <div class="indicador">
            <span id="indicador-frosting-personalizado" class="active"></span>
            <span id="indicador-relleno-personalizado"></span>
            <span id="indicador-masa-personalizado"></span>
        </div>
        <ul id="opciones-frosting-personalizado"></ul>
        <ul id="opciones-relleno-personalizado" style="display: none;"></ul>
        <ul id="opciones-masa-personalizado" style="display: none;"></ul>
        <button class="continue-btn" id="continuar-personalizado" disabled>Continuar</button>
    </div>

    <!-- Insertar el código JavaScript aquí -->
    <script>
        const popup = document.getElementById('popup-personalizado');
        const abrirPopup = document.getElementById('abrir-popup-personalizado');
        const cerrarPopup = document.getElementById('cerrar-popup-personalizado');
        const continuar = document.getElementById('continuar-personalizado');
        const tituloPopup = document.getElementById('titulo-popup-personalizado');
        const subtituloPopup = document.getElementById('subtitulo-popup-personalizado');
        const imagenCupcake = document.getElementById('imagen-cupcake-personalizado');
        const indicadores = document.querySelectorAll('.indicador span');

        let etapaActual = 0; // 0 = Frosting, 1 = Relleno, 2 = Masa

        const etapas = [
            {
                tituloKey: 'popup-title',
                subtituloKey: 'subtitulo-0',
                imagen: 'Imagenes/Personalizado/Frosting (CUPCAKE - PERSONALIZADO).png',
                opcionesKeys: [
                    'frosting-manzanas-asadas',
                    'frosting-limon',
                    'ganash-chocolate-amargo',
                    'frosting-queso-caramelo',
                    'cobertura-chocolate-ddl',
                    'crema-helada',
                    'frosting-pistacho',
                    'frosting-banana-caramelo',
                    'frosting-caramelo-sal-pretzel',
                    'frosting-flynn',
                    'frosting-cookies-cream',
                    'frosting-cereales'
                ],
                id: 'opciones-frosting-personalizado'
            },
            {
                tituloKey: 'popup-title',
                subtituloKey: 'subtitulo-1',
                imagen: 'Imagenes/Personalizado/Relleno (CUPCAKE - PERSONALIZADO).png',
                opcionesKeys: [
                    'manzanas-caramelo',
                    'crema-limon-merengue',
                    'crema-cacao',
                    'ddl-bitea',
                    'crema-helada-relleno',
                    'pistacho-nuez',
                    'banana-caramelo',
                    'flynn-bite-relleno',
                    'cream-cookies',
                    'caramelo-pretzel',
                    'cereales-relleno'
                ],
                id: 'opciones-relleno-personalizado'
            },
            {
                tituloKey: 'popup-title',
                subtituloKey: 'subtitulo-2',
                imagen: 'Imagenes/Personalizado/Masa (CUPCAKES - PERSONALIZADO).png',
                opcionesKeys: [
                    'chocolate',
                    'vainilla',
                    'marmolada',
                    'red-velvet'
                ],
                id: 'opciones-masa-personalizado'
            }
        ];


        const habilitarContinuar = () => {
            const opcionSeleccionada = document.querySelector(`#${etapas[etapaActual].id} input:checked`);
            continuar.disabled = !opcionSeleccionada; // Habilitar o deshabilitar el botón según si hay una opción seleccionada
        };

        const manejarSeleccion = (event, categoria) => {
            const opcionesDelGrupo = document.querySelectorAll(`#${categoria} input[type="checkbox"]`);

            // Desmarcar las otras opciones si se selecciona una
            opcionesDelGrupo.forEach(opcion => {
                if (opcion !== event.target) {
                    opcion.checked = false; // Desmarcar las demás opciones
                }
            });

            habilitarContinuar(); // Habilitar o deshabilitar el botón de continuar
        };

        const continuarHandler = () => {
            if (etapaActual < etapas.length - 1) {
                etapaActual++;
                actualizarContenido();
            } else {
                // Redirigir a la página Cajaspersonalizar.html cuando llegamos al último paso
                window.location.href = 'Cajaspersonalizar.html';
            }
        };

        const mostrarPopup = () => {
            popup.classList.add('active');
            actualizarContenido();
        };

        const cerrarPopupHandler = () => {
            popup.classList.remove('active');
            etapaActual = 0; // Reiniciar etapa al cerrar
            actualizarContenido();
        };

        const actualizarContenido = () => {
            const etapa = etapas[etapaActual];

            // Idioma actual
            const lang = localStorage.getItem("language") || "es";

            // Traducir título y subtítulo desde translations.js
            tituloPopup.textContent = translations[lang][etapa.tituloKey] || etapa.tituloKey;
            subtituloPopup.textContent = translations[lang][etapa.subtituloKey] || etapa.subtituloKey;

            // Actualizar imagen
            imagenCupcake.src = etapa.imagen;

            // Ocultar todas las listas de opciones
            document.querySelectorAll("ul[id^='opciones-']").forEach((ul) => {
                ul.style.display = 'none';
            });

            // Mostrar la lista actual
            const listaOpciones = document.getElementById(etapa.id);
            listaOpciones.style.display = 'block';

            // Renderizar opciones traducidas
            listaOpciones.innerHTML = etapa.opcionesKeys
                .map(opcionKey => `
            <li>
                <input type="checkbox" value="${opcionKey}" />
                ${translations[lang][opcionKey] || opcionKey}
            </li>
        `)
                .join('');

            habilitarContinuar(); // Habilitar botón si hay opción seleccionada

            // Delegar eventos de selección
            listaOpciones.querySelectorAll('input').forEach(input => {
                input.addEventListener('change', (event) => {
                    manejarSeleccion(event, etapa.id);
                });
            });

            // Actualizar los indicadores de progreso
            indicadores.forEach((indicador, index) => {
                indicador.classList.toggle('active', index === etapaActual);
            });
        };


        // Abre el popup al hacer clic en el botón Personalizar
        abrirPopup.addEventListener('click', mostrarPopup);

        // Cerrar el popup al hacer clic en el icono de cerrar
        cerrarPopup.addEventListener('click', cerrarPopupHandler);

        // Manejar el evento de continuar
        continuar.addEventListener('click', continuarHandler);
        // MENU HAMBURGUESA 
        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('menu-open');
            });
        }

    </script>


    <script src="js/sabores.js"></script>
    <script src="js/carrito.js"></script>
    <script src="js/translations.js"></script>
    <script src="js/common.js"></script>

</body>


<!-- Footer -->
<footer class="footer">
    <!-- Enlaces arriba: Ubicación, Historia, Contacto -->
    <div class="footer-links">
        <a class="footer-link"
            href="https://www.google.com/maps/place/El+Salvador+4689,+C1414+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5893949,-58.4294298,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb5879646ab49:0xab54ef9b6efc2346!8m2!3d-34.5893949"
            target="_blank">
            <img src="Imagenes/Footer/Locación.png" alt="Ubicación" class="footer-icon">
            <span id="footer-location">Ubicación</span>
        </a>
        <a class="footer-link" href="Historia.html">
            <img src="Imagenes/Footer/Historia.png" alt="Historia" class="footer-icon">
            <span id="footer-history">Historia</span>
        </a>
        <a class="footer-link" href="/cdn-cgi/l/email-protection#c2afaba1a39dafa3a5aca382aaadb6afa3abaeeca1adaf"
            target="_blank">
            <img src="Imagenes/Footer/Contacto.png" alt="Contacto" class="footer-icon">
            <span id="footer-contact">Contacto</span>
        </a>
    </div>

    <!--Redes sociales>-->

    <div class="footer-social">
        <a class="social-link" href="https://www.instagram.com/betular.patisserie/?hl=en" target="_blank">
            <img src="Imagenes/Footer/Redes/Ig.png" alt="Instagram" class="social-icon">
        </a>
        <a class="social-link" href="https://www.tiktok.com/@betular.patisserie?lang=en" target="_blank">
            <img src="Imagenes/Footer/Redes/Tik Tok.png" alt="TikTok" class="social-icon">
        </a>
        <a class="social-link" href="https://wa.me/1234567890" target="_blank">
            <img src="Imagenes/Footer/Redes/WhatsApp.png" alt="WhatsApp" class="social-icon">
        </a>
    </div>

    <!-- Imagen del logo con enlace -->
    <div class="footer-logo">
        <a href="index.html">
            <img src="Imagenes/Footer/Logo Bitea (Negro) .png" alt="Logo">
        </a>
    </div>
</footer>

</html>