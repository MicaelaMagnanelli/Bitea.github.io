<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitea</title>
    <link rel="icon" href="Imagenes/Logo.png" type="image/x-icon">
    <link rel="stylesheet" href="Css/styles-caja.css">
    <!-- TIPOGRAFÍA -->
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai+Looped:wght@100;200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
</head>

<body>
    <header>
        <div class="logo">
            <a href="index.html">
                <img src="Imagenes/Logo de Bitea (Blanco).png" alt="Logo" class="logo-img">
            </a>
        </div>

        <nav class="navbar">
            <ul class="menu">
                <li><a href="index.html">Menú</a></li>
                <li><a href="Comprar.html">Comprar</a></li>
            </ul>
        </nav>
        <div class="actions">
            <button class="personalizar-btn" id="abrir-popup-personalizado">Personalizar</button>
        </div>


        <!-- Íconos de carrito  -->
        <div class="icon-container">
            <!-- El enlace del carrito -->
            <a href="javascript:void(0)" onclick="mostrarCarrito()">
                <img src="Imagenes/Menu/Carrito.png" alt="Carrito" class="icon">
                <!-- El contador debe estar aquí, en el ícono del carrito -->
                <span id="contador-carrito" class="contador-carrito">0</span>
            </a>

        </div>


        <!-- Modal del carrito -->
        <div id="modal-carrito" class="modal" style="display: none;">
            <div class="modal-contenido">
                <!-- Botón para cerrar el modal -->
                <span class="cerrar" onclick="cerrarCarrito()">&times;</span>

                <!-- Contenido del carrito -->
                <div id="contenido-carrito"></div>

                <!-- Total del carrito -->
                <div id="total-carrito"></div>

                <!-- Botón de finalizar compra en el footer -->
                <div id="footer-carrito">
                    <button class="boton-finalizar" onclick="irACaja()">Finalizar compra</button>
                </div>
            </div>
        </div>

    </header>

    <section class="container">
        <div class="box-area">
            <img src="Imagenes/Cajas/Caja sin fondo y sin sombra .png" alt="Bitea Box" class="box-image">
        </div>

        <div class="selection-area">
            <h2 class="title">Seleccioná 3 sabores</h2>
            <button class="buy-button" id="buy-button" disabled>Comprar</button>
        </div>

        <div class="product-item cupcake-item">
            <img src="Imagenes/Personalizado/Cupcake con logo.png" alt="Cupcake Personalizado">
            <span class="cupcake-personalizado">Cupcake Personalizado</span>
        </div>

        <div class="agregar-personalizado">
            <button id="abrir-popup-personalizado-c3">Agregar +</button>
        </div>

        <!-- Pop-up (popup-personalizado-c3) -->
        <div class="popup" id="popup-personalizado-c3">
            <span id="cerrar-popup-personalizado-c3" class="cerrar-popup">&times;</span>
            <h3 id="titulo-popup-personalizado-c3">Armá tu cupcake</h3>
            <p id="subtitulo-popup-personalizado-c3">Elegí tu Frosting</p>
            <img id="imagen-cupcake-personalizado-c3" class="imagen-cupcake"
                src="Imagenes/Personalizado/Frosting (CUPCAKE - PERSONALIZADO).png" alt="Cupcake con Frosting">
            <div class="indicador">
                <span id="indicador-frosting-personalizado-c3" class="active"></span>
                <span id="indicador-relleno-personalizado-c3"></span>
                <span id="indicador-masa-personalizado-c3"></span>
            </div>
            <ul id="opciones-frosting-personalizado-c3"></ul>
            <ul id="opciones-relleno-personalizado-c3" style="display: none;"></ul>
            <ul id="opciones-masa-personalizado-c3" style="display: none;"></ul>
            <button class="continue-btn" id="continuar-personalizado-c3" disabled>Continuar</button>
        </div>

        <!-- Pop-up (log in) -->
        <div id="popup-login" class="popup-login hidden">
            <div class="popup-content">
                <button class="close-button">&times;</button>
                <h2>Entra</h2>
                <div class="popup-image">
                    <img src="Imagenes/Patrón.png" alt="Imagen descriptiva">
                </div>
                <form>
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="Ingresa tu correo" required>

                    <label for="password">Contraseña</label>
                    <input type="password" id="password" name="password" placeholder="Ingresa tu contraseña" required>

                    <a href="#" class="forgot-password">¿Olvidaste tu contraseña?</a>
                    <button type="submit" class="login-button">Entrar</button>
                </form>
                <p>¿No tienes cuenta? <a href="Ccuenta.html">Únete</a></p>
                <div class="social-login">
                    <button class="google-login">
                        <img src="Imagenes/PopUp/Ícono Gmail.png" alt="Google" class="social-icon">
                        Entra con Gmail
                    </button>
                    <button class="apple-login">
                        <img src="Imagenes/PopUp/Ícono Apple.png" alt="Apple" class="social-icon">
                        Entra con Apple
                    </button>
                    <button class="facebook-login">
                        <img src="Imagenes/PopUp/ícono Facebook.png" alt="Facebook" class="social-icon">
                        Entra con Facebook
                    </button>
                </div>
            </div>
        </div>

        <!-- Pop-up (popup-personalizado) -->
        <div class="popup" id="popup-personalizado">
            <span id="cerrar-popup-personalizado" class="cerrar-popup">&times;</span>
            <h3 id="titulo-popup-personalizado">Armá tu cupcake</h3>
            <p id="subtitulo-popup-personalizado">Elegí tu Frosting</p>
            <img id="imagen-cupcake-personalizado" class="imagen-cupcake"
                src="Imagenes/Personalizado/Frosting (CUPCAKE - PERSONALIZADO).png" alt="Cupcake con Frosting">
            <div class="indicador">
                <span id="indicador-frosting-personalizado" class="active"></span>
                <span id="indicador-relleno-personalizado"></span>
                <span id="indicador-masa-personalizado"></span>
            </div>
            <ul id="opciones-frosting-personalizado"></ul>
            <ul id="opciones-relleno-personalizado" style="display: none;"></ul>
            <ul id="opciones-masa-personalizado" style="display: none;"></ul>
            <button class="continue-btn" id="continuar-personalizado" disabled>Continuar</button>
        </div>

        <!-- Insertar el código JavaScript aquí -->
        <script>
            const popup = document.getElementById('popup-personalizado');
            const abrirPopup = document.getElementById('abrir-popup-personalizado');
            const cerrarPopup = document.getElementById('cerrar-popup-personalizado');
            const continuar = document.getElementById('continuar-personalizado');
            const tituloPopup = document.getElementById('titulo-popup-personalizado');
            const subtituloPopup = document.getElementById('subtitulo-popup-personalizado');
            const imagenCupcake = document.getElementById('imagen-cupcake-personalizado');
            const indicadores = document.querySelectorAll('.indicador span');

            let etapaActual = 0; // 0 = Frosting, 1 = Relleno, 2 = Masa

            const etapas = [
                {
                    titulo: 'Armá tu cupcake',
                    subtitulo: 'Elegí tu Frosting',
                    imagen: 'Imagenes/Personalizado/Frosting (CUPCAKE - PERSONALIZADO).png',
                    opciones: [
                        'Frosting de manzanas asadas',
                        'Frosting de limón',
                        'Ganash de chocolate amargo',
                        'Frosting de queso y caramelo',
                        'Cobertura de chocolate y DDL',
                        'Crema helada',
                        'Froosting de pistacho',
                        'Froosting de banana y caramelo',
                        'Froosting de caramelo, sal y pretzel',
                        'Froostin Flynn',
                        'Froostin de cookies and cream',
                        'Frosting cereales'
                    ],
                    id: 'opciones-frosting-personalizado'
                },
                {
                    titulo: 'Armá tu cupcake',
                    subtitulo: 'Elegí tu Relleno',
                    imagen: 'Imagenes/Personalizado/Relleno (CUPCAKE - PERSONALIZADO).png',
                    opciones: [
                        'Manzanas y caramelo',
                        'Crema de limón y merengue',
                        'Crema de cacao',
                        'DDL Bitea',
                        'Crema Helada',
                        'Pistacho y nuez',
                        'Banana y caramelo',
                        'Flynn Bite',
                        'Cream and cookies',
                        'Caramelo y pretzel',
                        'Cereales'
                    ],
                    id: 'opciones-relleno-personalizado'
                },
                {
                    titulo: 'Armá tu cupcake',
                    subtitulo: 'Elegí tu Masa',
                    imagen: 'Imagenes/Personalizado/Masa (CUPCAKES - PERSONALIZADO).png',
                    opciones: [
                        'Chocolate',
                        'Vainilla',
                        'Marmolada',
                        'Red Velvet'
                    ],
                    id: 'opciones-masa-personalizado'
                }
            ];

            const habilitarContinuar = () => {
                const opcionSeleccionada = document.querySelector(`#${etapas[etapaActual].id} input:checked`);
                continuar.disabled = !opcionSeleccionada; // Habilitar o deshabilitar el botón según si hay una opción seleccionada
            };

            const manejarSeleccion = (event, categoria) => {
                const opcionesDelGrupo = document.querySelectorAll(`#${categoria} input[type="checkbox"]`);

                // Desmarcar las otras opciones si se selecciona una
                opcionesDelGrupo.forEach(opcion => {
                    if (opcion !== event.target) {
                        opcion.checked = false; // Desmarcar las demás opciones
                    }
                });

                habilitarContinuar(); // Habilitar o deshabilitar el botón de continuar
            };

            const continuarHandler = () => {
                if (etapaActual < etapas.length - 1) {
                    etapaActual++;
                    actualizarContenido();
                } else {
                    // Redirigir a la página Cajaspersonalizar.html cuando llegamos al último paso
                    window.location.href = 'Cajaspersonalizar.html';
                }
            };

            const mostrarPopup = () => {
                popup.classList.add('active');
                actualizarContenido();
            };

            const cerrarPopupHandler = () => {
                popup.classList.remove('active');
                etapaActual = 0; // Reiniciar etapa al cerrar
                actualizarContenido();
            };

            const actualizarContenido = () => {
                const etapa = etapas[etapaActual];

                // Actualizar textos
                tituloPopup.textContent = etapa.titulo;
                subtituloPopup.textContent = etapa.subtitulo;

                // Actualizar imagen
                imagenCupcake.src = etapa.imagen;

                // Mostrar solo las opciones de la etapa actual
                document.querySelectorAll("ul[id^='opciones-']").forEach((ul) => {
                    ul.style.display = 'none'; // Ocultar todas las listas
                });

                const listaOpciones = document.querySelector(`#${etapa.id}`);
                listaOpciones.style.display = 'block'; // Mostrar la lista actual

                listaOpciones.innerHTML = etapa.opciones
                    .map(opcion => `<li><input type="checkbox"> ${opcion}</li>`)
                    .join('');

                habilitarContinuar(); // Verificar si se habilita el botón de continuar

                // Delegar el evento a cada checkbox para manejar la selección
                listaOpciones.querySelectorAll('input').forEach(input => {
                    input.addEventListener('change', (event) => {
                        manejarSeleccion(event, etapa.id);
                    });
                });

                // Actualizar indicador visual
                indicadores.forEach((indicador, index) => {
                    indicador.classList.toggle('active', index === etapaActual);
                });
            };

            // Abre el popup al hacer clic en el botón Personalizar
            abrirPopup.addEventListener('click', mostrarPopup);

            // Cerrar el popup al hacer clic en el icono de cerrar
            cerrarPopup.addEventListener('click', cerrarPopupHandler);

            // Manejar el evento de continuar
            continuar.addEventListener('click', continuarHandler);
        </script>





    </section>

    <script src="js/popup-script.js"></script>
    <script src="js/carrito.js"></script>

</body>
<!-- Footer -->
<footer class="footer">
    <!-- Enlaces arriba: Ubicación, Historia, Contacto -->
    <div class="footer-links">
        <a class="footer-link"
            href="https://www.google.com/maps/place/El+Salvador+4689,+C1414+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5893949,-58.4294298,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb5879646ab49:0xab54ef9b6efc2346!8m2!3d-34.5893949"
            target="_blank">
            <img src="Imagenes/Footer/Locación.png" alt="Ubicación" class="footer-icon">
            Ubicación
        </a>
        <a class="footer-link" href="Historia.html">
            <img src="Imagenes/Footer/Historia.png" alt="Historia" class="footer-icon">
            Historia
        </a>
        <a class="footer-link" href="Crear Cuenta.html" target="_blank">
            <img src="Imagenes/Footer/Contacto.png" alt="Contacto" class="footer-icon">
            Contacto
        </a>
    </div>

    <!--Redes sociales>-->

    <div class="footer-social">
        <a class="social-link" href="https://www.instagram.com/betular.patisserie/?hl=en" target="_blank">
            <img src="Imagenes/Footer/Redes/Ig.png" alt="Instagram" class="social-icon">
        </a>
        <a class="social-link" href="https://www.tiktok.com/@betular.patisserie?lang=en" target="_blank">
            <img src="Imagenes/Footer/Redes/Tik Tok.png" alt="TikTok" class="social-icon">
        </a>
        <a class="social-link" href="https://wa.me/1234567890" target="_blank">
            <img src="Imagenes/Footer/Redes/WhatsApp.png" alt="WhatsApp" class="social-icon">
        </a>
    </div>

    <!-- Imagen del logo con enlace -->
    <div class="footer-logo">
        <a href="index.html">
            <img src="Imagenes/Footer/Logo Bitea (Negro) .png" alt="Logo">
        </a>
    </div>
</footer>


</html>